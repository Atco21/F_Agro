<!-- #modalElement Permite manipular el modal desde el TypeScript.-->

<!-- isVisible controla el modal Si es tru class show se muestra si es false aria-hiden no se muestra-->

<div #modalElement class="modal fade" [class.show]="isVisible" [attr.aria-hidden]="!isVisible">

  <div class="modal-dialog modal-dialog-centered modal-fullscreen">

    <div class="modal-content" (click)="$event.stopPropagation()"><!--stopPropagation evita que se propague el evento; AQUI LO QUE HACE ES QUE NO FUCIONE EL CLICK DE CERRAR MODAL PARA PODER GUARDAR EL EVENTO CON EL BOTON GUADAR Y LA FUNCION-->

      <div class="modal-header">

        <button type="button" class="btn-close" (click)="cerrarModal()"></button>

      </div>

      <div class="modal-body ">

        <div class="d-flex align-items-center justify-content-center ps-2">


          <img src="/Parcela-Icon1.svg" alt="Parcela Icon" class="img-fluid" />


          <h1 class="modal-title w-100 text-center">Seleccionar parcela</h1>

        </div>

        <div class=" d-flex align-items-center flex-column">

          <div class="input-group mb-3 mt-5 w-100 justify-content-center align-items-center" id="cuadroBusqueda">

            <input type="search" class="form-control" placeholder="Buscar" id="textoBusqueda">

            <span class="input-group-text" id="textoBusqueda">

              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">

                <mask id="path-1-inside-1_1170_6865" fill="white">

                <path d="M23.8595 23.181L17.5419 16.8634C19.3125 14.9156 20.2511 12.3525 20.1572 9.7219C20.0632 7.09127 18.9441 4.60172 17.039 2.78523C15.1339 0.968742 12.5939 -0.0306132 9.9618 0.000714928C7.32969 0.0320431 4.81421 1.09157 2.95289 2.95289C1.09157 4.81421 0.0320431 7.32969 0.000714928 9.9618C-0.0306132 12.5939 0.968742 15.1339 2.78523 17.039C4.60172 18.9441 7.09127 20.0632 9.7219 20.1572C12.3525 20.2511 14.9156 19.3125 16.8634 17.5419L23.181 23.8595C23.2709 23.9495 23.393 24 23.5202 24C23.6475 24 23.7695 23.9495 23.8595 23.8595C23.9495 23.7695 24 23.6475 24 23.5202C24 23.393 23.9495 23.2709 23.8595 23.181ZM0.983042 10.0938C0.983042 8.29188 1.51738 6.5304 2.51848 5.03214C3.51959 3.53388 4.9425 2.36613 6.60727 1.67656C8.27205 0.986985 10.1039 0.806562 11.8712 1.1581C13.6386 1.50964 15.2619 2.37736 16.5361 3.65153C17.8103 4.92569 18.678 6.54907 19.0295 8.31639C19.3811 10.0837 19.2006 11.9156 18.5111 13.5804C17.8215 15.2451 16.6537 16.668 15.1555 17.6691C13.6572 18.6703 11.8958 19.2046 10.0938 19.2046C7.67827 19.2021 5.36238 18.2414 3.65433 16.5333C1.94628 14.8252 0.98558 12.5094 0.983042 10.0938Z"/>

                </mask>

                <path d="M23.8595 23.181L17.5419 16.8634C19.3125 14.9156 20.2511 12.3525 20.1572 9.7219C20.0632 7.09127 18.9441 4.60172 17.039 2.78523C15.1339 0.968742 12.5939 -0.0306132 9.9618 0.000714928C7.32969 0.0320431 4.81421 1.09157 2.95289 2.95289C1.09157 4.81421 0.0320431 7.32969 0.000714928 9.9618C-0.0306132 12.5939 0.968742 15.1339 2.78523 17.039C4.60172 18.9441 7.09127 20.0632 9.7219 20.1572C12.3525 20.2511 14.9156 19.3125 16.8634 17.5419L23.181 23.8595C23.2709 23.9495 23.393 24 23.5202 24C23.6475 24 23.7695 23.9495 23.8595 23.8595C23.9495 23.7695 24 23.6475 24 23.5202C24 23.393 23.9495 23.2709 23.8595 23.181ZM0.983042 10.0938C0.983042 8.29188 1.51738 6.5304 2.51848 5.03214C3.51959 3.53388 4.9425 2.36613 6.60727 1.67656C8.27205 0.986985 10.1039 0.806562 11.8712 1.1581C13.6386 1.50964 15.2619 2.37736 16.5361 3.65153C17.8103 4.92569 18.678 6.54907 19.0295 8.31639C19.3811 10.0837 19.2006 11.9156 18.5111 13.5804C17.8215 15.2451 16.6537 16.668 15.1555 17.6691C13.6572 18.6703 11.8958 19.2046 10.0938 19.2046C7.67827 19.2021 5.36238 18.2414 3.65433 16.5333C1.94628 14.8252 0.98558 12.5094 0.983042 10.0938Z" fill="black"/>

                <path d="M23.8595 23.181L23.1524 23.8881L23.8595 23.181ZM17.5419 16.8634L16.8019 16.1907L16.1605 16.8962L16.8348 17.5705L17.5419 16.8634ZM16.8634 17.5419L17.5705 16.8348L16.8962 16.1605L16.1907 16.8019L16.8634 17.5419ZM23.181 23.8595L23.8881 23.1524L23.8881 23.1524L23.181 23.8595ZM23.5202 24L23.5202 23L23.5202 24ZM24 23.5202L23 23.5202L24 23.5202ZM0.983042 10.0938L-0.0169588 10.0938L-0.0169577 10.0949L0.983042 10.0938ZM10.0938 19.2046L10.0928 20.2046H10.0938V19.2046ZM24.5666 22.4739L18.249 16.1563L16.8348 17.5705L23.1524 23.8881L24.5666 22.4739ZM18.2818 17.536C20.2281 15.395 21.2598 12.5778 21.1565 9.6862L19.1578 9.75759C19.2424 12.1273 18.3969 14.4361 16.8019 16.1907L18.2818 17.536ZM21.1565 9.6862C21.0532 6.79465 19.8231 4.05816 17.7291 2.0615L16.3489 3.50897C18.0651 5.14528 19.0731 7.3879 19.1578 9.75759L21.1565 9.6862ZM17.7291 2.0615C15.635 0.0648304 12.8431 -1.03365 9.9499 -0.999214L9.9737 1.00064C12.3447 0.972423 14.6328 1.87265 16.3489 3.50897L17.7291 2.0615ZM9.9499 -0.999214C7.05671 -0.964779 4.29172 0.199842 2.24578 2.24578L3.66 3.66C5.33669 1.9833 7.60267 1.02886 9.9737 1.00064L9.9499 -0.999214ZM2.24578 2.24578C0.199841 4.29172 -0.964779 7.05671 -0.999214 9.9499L1.00064 9.9737C1.02886 7.60267 1.9833 5.33669 3.66 3.66L2.24578 2.24578ZM-0.999214 9.9499C-1.03365 12.8431 0.0648305 15.635 2.0615 17.7291L3.50897 16.3489C1.87265 14.6328 0.972423 12.3447 1.00064 9.9737L-0.999214 9.9499ZM2.0615 17.7291C4.05816 19.8231 6.79465 21.0532 9.6862 21.1565L9.75759 19.1578C7.3879 19.0731 5.14528 18.0651 3.50897 16.3489L2.0615 17.7291ZM9.6862 21.1565C12.5778 21.2598 15.395 20.2281 17.536 18.2818L16.1907 16.8019C14.4361 18.3969 12.1273 19.2424 9.75759 19.1578L9.6862 21.1565ZM16.1563 18.249L22.4739 24.5666L23.8881 23.1524L17.5705 16.8348L16.1563 18.249ZM22.4739 24.5666C22.7514 24.8441 23.1278 25 23.5202 25L23.5202 23C23.6582 23 23.7905 23.0548 23.8881 23.1524L22.4739 24.5666ZM23.5202 25C23.9127 25 24.2891 24.8441 24.5666 24.5666L23.1524 23.1524C23.2499 23.0548 23.3823 23 23.5202 23L23.5202 25ZM24.5666 24.5666C24.8441 24.2891 25 23.9127 25 23.5202L23 23.5202C23 23.3822 23.0548 23.2499 23.1524 23.1524L24.5666 24.5666ZM25 23.5202C25 23.1278 24.8441 22.7514 24.5666 22.4739L23.1524 23.8881C23.0548 23.7905 23 23.6582 23 23.5202L25 23.5202ZM1.98304 10.0938C1.98304 8.48966 2.45873 6.92152 3.34995 5.58771L1.68701 4.47657C0.576028 6.13928 -0.0169582 8.09409 -0.0169582 10.0938H1.98304ZM3.34995 5.58771C4.24118 4.2539 5.50791 3.21432 6.98996 2.60044L6.22459 0.752679C4.37709 1.51794 2.798 2.81386 1.68701 4.47657L3.34995 5.58771ZM6.98996 2.60044C8.47201 1.98655 10.1028 1.82593 11.6761 2.13889L12.0663 0.177318C10.105 -0.212809 8.07209 -0.0125818 6.22459 0.752679L6.98996 2.60044ZM11.6761 2.13889C13.2495 2.45184 14.6947 3.22432 15.829 4.35863L17.2432 2.94442C15.8292 1.5304 14.0276 0.567444 12.0663 0.177318L11.6761 2.13889ZM15.829 4.35863C16.9633 5.49294 17.7358 6.93815 18.0487 8.51148L20.0103 8.1213C19.6202 6.16 18.6572 4.35844 17.2432 2.94442L15.829 4.35863ZM18.0487 8.51148C18.3617 10.0848 18.2011 11.7156 17.5872 13.1977L19.435 13.963C20.2002 12.1155 20.4004 10.0826 20.0103 8.1213L18.0487 8.51148ZM17.5872 13.1977C16.9733 14.6797 15.9337 15.9465 14.5999 16.8377L15.7111 18.5006C17.3738 17.3896 18.6697 15.8105 19.435 13.963L17.5872 13.1977ZM14.5999 16.8377C13.2661 17.7289 11.698 18.2046 10.0938 18.2046V20.2046C12.0935 20.2046 14.0484 19.6116 15.7111 18.5006L14.5999 16.8377ZM10.0949 18.2046C7.94417 18.2023 5.88221 17.347 4.36144 15.8262L2.94722 17.2404C4.84255 19.1357 7.41236 20.2018 10.0928 20.2046L10.0949 18.2046ZM4.36144 15.8262C2.84066 14.3054 1.9853 12.2435 1.98304 10.0928L-0.0169577 10.0949C-0.0141406 12.7753 1.05189 15.3451 2.94722 17.2404L4.36144 15.8262Z" fill="#004215" mask="url(#path-1-inside-1_1170_6865)"/>
                </svg>
            </span>
          </div>

          <div class="mt-5 w-100" id="cuadroParcelas">
            @for (parcela of parcelas; track parcela.id) {
            <div class="d-flex justify-content-around w-100 m-2">
              <img src="ruta-a-tu-imagen.jpg" alt="Imagen de ejemplo" class="imagen-circular">
              <label class="form-check-label w-100 d-flex align-items-center">
                {{ parcela.nombre }}
                <input type="checkbox" class="ms-auto" [checked]="parcelaSeleecionada.includes(parcela)" (change)="revisarParcelas(parcela)">
              </label>
            </div>
            }
          </div>
      <div class="modal-footer d-flex justify-content-center align-items-center">
        <button type="button" class="btn mt-3" (click)="guardarCambios()">Guardar Cambios</button>
      </div>
    </div>
  </div>
</div>
